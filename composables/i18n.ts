export function useI18n() {
  const locale = useState<string>('locale', () => 'fr')

  const dict: Record<string, Record<string, string>> = {
    fr: {
      'home.title': 'Wa-Shop',
      'home.description': 'Créez votre boutique WhatsApp en quelques minutes.',
      'home.cta': 'Commencer',
      'home.officialPartner': 'Truces de frapente',
      'home.heroPrefix': 'Créez un Ecommerce pour',
      'home.heroWhatsApp': 'WhatsApp',
      'home.heroSubtitle': 'Simplifiez les commandes WhatsApp. Augmentez les ventes avec un meilleur service client. Lancez votre boutique en quelques minutes sans coder.',
      'home.ctaStartFree': 'Commencer gratuitement',
      'home.ctaHowItWorks': 'Voir comment ça marche',
      'home.reviews': '500+ avis',
      'home.trustedBy': 'Plébiscité par les entreprises modernes',
      'home.sectionSimplifyTitle': 'Simplifiez les commandes WhatsApp',
      'home.sectionSimplifyDesc': 'Automatisez votre processus de vente avec nos fonctionnalités puissantes.',
      'home.featureOrderFormTitle': 'Formulaire de commande WhatsApp',
      'home.featureOrderFormDesc': 'Les clients passent leurs commandes via WhatsApp, en précisant leurs choix et leur planning.',
      'home.demoHeader': 'Commande',
      'home.demoPickTitle': 'Choisissez vos articles',
      'home.demoAdd': 'Ajouter',
      'home.demoAdded': 'Ajouté',
      'home.demoTotal': 'Total',
      'home.demoTotal1': '12 000 FCFA',
      'home.demoTotal2': '19 500 FCFA',
      'home.demoSendWhatsApp': 'Envoyer sur WhatsApp',
      'home.demoSentToast': 'Commande envoyée',
      'home.demoSentToastSub': 'Le client reçoit le récapitulatif sur WhatsApp',
      'home.demoProduct1Name': 'Pack livraison',
      'home.demoProduct1Price': '12 000 FCFA',
      'home.demoProduct2Name': 'Boisson fraîche',
      'home.demoProduct2Price': '7 500 FCFA',
      'common.learnMore': 'En savoir plus',
      'home.featureOrderMgmtTitle': 'Gestion des commandes en ligne',
      'home.featureOrderMgmtDesc': 'Suivez les commandes, gérez les stocks et envoyez des mises à jour automatiquement depuis un tableau de bord centralisé.',
      'home.featureUpdatesTitle': 'Mises à jour automatiques',
      'home.featureUpdatesDesc': 'Envoyez automatiquement au client la confirmation, l’état et la livraison sur WhatsApp.',
      'home.updatesPreview': 'Aperçu',
      'home.chatCustomer': 'Client',
      'home.chatCustomerMsg': 'Bonjour, ma commande est confirmée ?',
      'home.chatStore': 'Boutique',
      'home.chatCustomerOk': 'Parfait, merci !',
      'home.updateMsg1': 'Oui ! Votre commande est en attente de confirmation.',
      'home.updateMsg2': 'Bonne nouvelle : votre commande est confirmée et en préparation.',
      'home.updateMsg3': 'Votre commande est en cours de livraison. On arrive bientôt.',
      'home.flowBadgePending': 'En attente',
      'home.flowBadgeConfirmed': 'Confirmée',
      'home.flowBadgeDelivered': 'Livrée',
      'home.howItWorksTitle': 'Comment ça marche',
      'home.howItWorksDesc': '4 étapes simples pour vendre sur WhatsApp avec une boutique claire.',
      'home.step1Title': 'Créez votre boutique',
      'home.step1Desc': 'Inscrivez‑vous et choisissez le nom + numéro WhatsApp.',
      'home.step2Title': 'Ajoutez vos produits',
      'home.step2Desc': 'Importez ou créez votre catalogue en quelques minutes.',
      'home.step3Title': 'Partagez le lien',
      'home.step3Desc': 'Publiez le lien de votre boutique sur WhatsApp et réseaux sociaux.',
      'home.step4Title': 'Recevez les commandes',
      'home.step4Desc': 'Centralisez, confirmez et suivez tout depuis le dashboard.',
      'home.flowTitle': 'Exemple de commande',
      'home.flowSubtitle': 'du client à la livraison',
      'home.flowOrderTitle': 'Commande #1024',
      'home.flowOrderDesc': '2 articles • Paiement à la livraison',
      'home.flowConfirmTitle': 'Confirmation',
      'home.flowConfirmDesc': 'Validation rapide côté boutique',
      'home.flowDeliveryTitle': 'Livraison',
      'home.flowDeliveryDesc': 'Suivi et statut en temps réel',
      'home.flowUpdatesTitle': 'Messages',
      'home.flowUpdatesDesc': 'Infos envoyées automatiquement',
      'home.websiteTitle': 'Créez votre site en quelques minutes',
      'home.websiteDesc': 'Choisissez parmi des modèles conçus par des professionnels.',
      'home.cardCatalogsTitle': 'Beaux catalogues produits',
      'home.cardCatalogsDesc': 'Présentez vos produits avec de superbes galeries.',
      'home.cardDomainTitle': 'Personnalisation du design',
      'home.cardDomainDesc': 'Couleurs, style et sections pour une boutique à votre image.',
      'home.designPreview': 'Design',
      'home.designLive': 'Aperçu',
      'home.designCta': 'Commander sur WhatsApp',
      'home.cardLinkBioTitle': 'Link-in-bio pour Instagram',
      'home.cardLinkBioDesc': 'Parfait pour la vente sur les réseaux sociaux.',
      'home.cardSeoTitle': 'Référencement SEO',
      'home.cardSeoDesc': 'Soyez trouvé sur Google avec des outils SEO intégrés.',
      'home.endCtaTitle': 'Prêt à vendre sur WhatsApp ?',
      'home.endCtaDesc': 'Créez votre boutique et recevez vos premières commandes dès aujourd’hui.',
      'home.endCtaButton': 'Créer ma boutique',
      'login.title': 'Connexion',
      'login.subtitle': 'Accédez à votre espace commerçant.',
      'create.title': 'Créer un nouveau magasin',
      'create.logo': 'Logo',
      'create.name': 'Nom du magasin *',
      'create.phoneCode': 'Indicatif *',
      'create.phone': 'Téléphone *',
      'create.link': 'Lien de magasin *',
      'create.color': 'Couleur',
      'create.create': 'Créer',
      'create.placeholderName': 'Nom de boutique',
      'create.placeholderPhone': 'Numéro de téléphone',
      'create.slugHint': 'Généré automatiquement à partir du nom, modifiable.',
      'common.home': 'Accueil',
      'common.search': 'Recherche',
      'register.start': 'Démarrer',
      'register.subtitle': 'Créez votre compte commerçant en quelques étapes.',
      'register.emailLabel': 'Adresse e‑mail *',
      'register.continueEmail': 'Continuer avec l’e‑mail',
      'register.codeTitle': 'Entrez le code de vérification',
      'register.codeMessage': 'Un code de vérification a été envoyé à {email}.',
      'register.codeLabel': 'Code de vérification *',
      'register.codeHint': 'Saisissez votre code reçu par e‑mail',
      'register.verifyContinue': 'Vérifier et continuer',
      'register.resendCode': 'Renvoyer le code',
      'register.codeInvalid': 'Code invalide. Veuillez réessayer.',
      'register.industryQuestion': 'Quel type d’entreprise dirigez‑vous ? *',
      'register.selectIndustry': 'Sélectionnez un secteur d’activité',
      'register.goalsTitle': 'Quel est votre objectif ?',
      'register.offerTitle': 'Obtenez votre premier mois pour 1 $',
      'register.offerTodayTitle': 'Aujourd’hui : accès instantané',
      'register.offerTodayDesc': 'Débloquez toutes les fonctionnalités. Aucun plafond.',
      'register.offerRemindTitle': 'Jan 8 : rappel',
      'register.offerRemindDesc': 'Rappels par WhatsApp et e‑mail avant la fin de l’essai.',
      'register.offerStartTitle': 'Jan 15 : forfait payant',
      'register.offerStartDesc': 'Annulez à tout moment dans les réglages.',
      'register.subscribeButton': 'Commencer pour 1 $',
      'register.skip': 'Sauter pour l’instant',
      'common.continue': 'Continuer',
      'common.or': 'ou',
      'common.sending': 'Envoi...',
      'common.verifying': 'Vérification...',
      'register.codeSent': 'Code envoyé',
      'register.resendIn': 'Renvoyer dans {s}s',
      'preview.store': 'Votre Boutique',
      'preview.sector': 'Secteur',
      'preview.order': 'Order #1024',
      'preview.pending': 'Pending',
      'preview.accepted': 'Accepted',
      'preview.accept': 'Accept',
      'preview.decline': 'Decline'
    },
    en: {
      'home.title': 'Wa-Shop Cameroon',
      'home.description': 'Create your WhatsApp store in minutes.',
      'home.cta': 'Get Started',
      'home.officialPartner': 'Official Partner',
      'home.heroPrefix': 'Create Ecommerce for',
      'home.heroWhatsApp': 'WhatsApp',
      'home.heroSubtitle': 'Simplify WhatsApp ordering. Boost sales with better customer service. Launch your store in minutes without any coding.',
      'home.ctaStartFree': 'Start for Free',
      'home.ctaHowItWorks': 'See how it works',
      'home.reviews': '500+ Reviews',
      'home.trustedBy': 'Trusted by modern businesses',
      'home.sectionSimplifyTitle': 'Simplify WhatsApp Ordering',
      'home.sectionSimplifyDesc': 'Automate your sales process with our powerful features.',
      'home.featureOrderFormTitle': 'WhatsApp Order Form',
      'home.featureOrderFormDesc': 'Customers independently place orders through WhatsApp, specifying their choices and scheduling.',
      'home.demoHeader': 'Order',
      'home.demoPickTitle': 'Pick your items',
      'home.demoAdd': 'Add',
      'home.demoAdded': 'Added',
      'home.demoTotal': 'Total',
      'home.demoTotal1': '12,000 XAF',
      'home.demoTotal2': '19,500 XAF',
      'home.demoSendWhatsApp': 'Send on WhatsApp',
      'home.demoSentToast': 'Order sent',
      'home.demoSentToastSub': 'Customer receives the summary on WhatsApp',
      'home.demoProduct1Name': 'Delivery pack',
      'home.demoProduct1Price': '12,000 XAF',
      'home.demoProduct2Name': 'Cold drink',
      'home.demoProduct2Price': '7,500 XAF',
      'common.learnMore': 'Learn more',
      'home.featureOrderMgmtTitle': 'Online Order Management',
      'home.featureOrderMgmtDesc': 'Track orders, manage inventory, and send updates automatically from a centralized dashboard.',
      'home.featureUpdatesTitle': 'Automatic updates',
      'home.featureUpdatesDesc': 'Automatically send confirmation, status and delivery updates on WhatsApp.',
      'home.updatesPreview': 'Preview',
      'home.chatCustomer': 'Customer',
      'home.chatCustomerMsg': 'Hi, is my order confirmed?',
      'home.chatStore': 'Store',
      'home.chatCustomerOk': 'Perfect, thanks!',
      'home.updateMsg1': 'Yes! Your order is pending confirmation.',
      'home.updateMsg2': 'Good news: your order is confirmed and being prepared.',
      'home.updateMsg3': 'Your order is out for delivery. See you soon.',
      'home.flowBadgePending': 'Pending',
      'home.flowBadgeConfirmed': 'Confirmed',
      'home.flowBadgeDelivered': 'Delivered',
      'home.howItWorksTitle': 'How it works',
      'home.howItWorksDesc': '4 simple steps to sell on WhatsApp with a clear store.',
      'home.step1Title': 'Create your store',
      'home.step1Desc': 'Sign up and set your store name + WhatsApp number.',
      'home.step2Title': 'Add your products',
      'home.step2Desc': 'Import or create your catalog in minutes.',
      'home.step3Title': 'Share your link',
      'home.step3Desc': 'Post your store link on WhatsApp and social media.',
      'home.step4Title': 'Receive orders',
      'home.step4Desc': 'Manage, confirm and track everything from the dashboard.',
      'home.flowTitle': 'Sample order',
      'home.flowSubtitle': 'from customer to delivery',
      'home.flowOrderTitle': 'Order #1024',
      'home.flowOrderDesc': '2 items • Pay on delivery',
      'home.flowConfirmTitle': 'Confirmation',
      'home.flowConfirmDesc': 'Fast validation on the merchant side',
      'home.flowDeliveryTitle': 'Delivery',
      'home.flowDeliveryDesc': 'Tracking and real-time status',
      'home.flowUpdatesTitle': 'Messages',
      'home.flowUpdatesDesc': 'Updates sent automatically',
      'home.websiteTitle': 'Create Your Website in Minutes',
      'home.websiteDesc': 'Choose from professionally designed templates.',
      'home.cardCatalogsTitle': 'Beautiful product catalogs',
      'home.cardCatalogsDesc': 'Showcase your products with stunning galleries.',
      'home.cardDomainTitle': 'Design customization',
      'home.cardDomainDesc': 'Colors, style and sections that match your brand.',
      'home.designPreview': 'Design',
      'home.designLive': 'Preview',
      'home.designCta': 'Order on WhatsApp',
      'home.cardLinkBioTitle': 'Link-in-bio for Instagram',
      'home.cardLinkBioDesc': 'Perfect for social media selling.',
      'home.cardSeoTitle': 'Search Engine Optimization (SEO)',
      'home.cardSeoDesc': 'Get found on Google with built-in SEO tools.',
      'home.endCtaTitle': 'Ready to sell on WhatsApp?',
      'home.endCtaDesc': 'Create your store and get your first orders today.',
      'home.endCtaButton': 'Create my store',
      'login.title': 'Login',
      'login.subtitle': 'Access your merchant dashboard.',
      'create.title': 'Create a new store',
      'create.logo': 'Logo',
      'create.name': 'Store name *',
      'create.phoneCode': 'Country code *',
      'create.phone': 'Phone *',
      'create.link': 'Store link *',
      'create.color': 'Color',
      'create.create': 'Create',
      'create.placeholderName': 'Store name',
      'create.placeholderPhone': 'Phone number',
      'create.slugHint': 'Automatically generated from name, editable.',
      'common.home': 'Home',
      'common.search': 'Search',
      'register.start': 'Get Started',
      'register.subtitle': 'Create your merchant account in a few steps.',
      'register.emailLabel': 'Email address *',
      'register.continueEmail': 'Continue with Email',
      'register.codeTitle': 'Enter verification code',
      'register.codeMessage': 'A verification code has been sent to {email}.',
      'register.codeLabel': 'Verification code *',
      'register.codeHint': 'Enter the code you received by email',
      'register.verifyContinue': 'Verify and continue',
      'register.resendCode': 'Resend code',
      'register.codeInvalid': 'Invalid code. Please try again.',
      'register.industryQuestion': 'What type of business do you run? *',
      'register.selectIndustry': 'Select an industry',
      'register.goalsTitle': 'What is your objective?',
      'register.offerTitle': 'Get your first month for $1',
      'register.offerTodayTitle': 'Today: instant access',
      'register.offerTodayDesc': 'Unlock all features. No cap.',
      'register.offerRemindTitle': 'Jan 8: we will remind you',
      'register.offerRemindDesc': 'WhatsApp and email reminders before the trial ends.',
      'register.offerStartTitle': 'Jan 15: paid plan starts',
      'register.offerStartDesc': 'Cancel anytime in settings.',
      'register.subscribeButton': 'Start for $1',
      'register.skip': 'Skip for now',
      'common.continue': 'Continue',
      'common.or': 'or',
      'common.sending': 'Sending...',
      'common.verifying': 'Verifying...',
      'register.codeSent': 'Code sent',
      'register.resendIn': 'Resend in {s}s',
      'preview.store': 'Your Store',
      'preview.sector': 'Sector',
      'preview.order': 'Order #1024',
      'preview.pending': 'Pending',
      'preview.accepted': 'Accepted',
      'preview.accept': 'Accept',
      'preview.decline': 'Decline'
    },
    it: {
      'home.title': 'Wa-Shop Camerun',
      'home.description': 'Crea il tuo negozio WhatsApp in pochi minuti.',
      'home.cta': 'Inizia',
      'home.officialPartner': 'Partner Ufficiale',
      'home.heroPrefix': 'Crea un E-commerce per',
      'home.heroWhatsApp': 'WhatsApp',
      'home.heroSubtitle': 'Semplifica gli ordini WhatsApp. Aumenta le vendite con un servizio clienti migliore. Lancia il tuo negozio in pochi minuti senza programmare.',
      'home.ctaStartFree': 'Inizia Gratis',
      'home.ctaHowItWorks': 'Come funziona',
      'home.reviews': '500+ Recensioni',
      'home.trustedBy': 'Scelto dalle aziende moderne',
      'home.sectionSimplifyTitle': 'Semplifica gli ordini WhatsApp',
      'home.sectionSimplifyDesc': 'Automatizza il processo di vendita con le nostre potenti funzionalità.',
      'home.featureOrderFormTitle': 'Modulo d\'ordine WhatsApp',
      'home.featureOrderFormDesc': 'I clienti effettuano ordini autonomamente tramite WhatsApp, specificando le loro scelte e la pianificazione.',
      'home.demoHeader': 'Ordine',
      'home.demoPickTitle': 'Scegli gli articoli',
      'home.demoAdd': 'Aggiungi',
      'home.demoAdded': 'Aggiunto',
      'home.demoTotal': 'Totale',
      'home.demoTotal1': '12.000 XAF',
      'home.demoTotal2': '19.500 XAF',
      'home.demoSendWhatsApp': 'Invia su WhatsApp',
      'home.demoSentToast': 'Ordine inviato',
      'home.demoSentToastSub': 'Il cliente riceve il riepilogo su WhatsApp',
      'home.demoProduct1Name': 'Pack consegna',
      'home.demoProduct1Price': '12.000 XAF',
      'home.demoProduct2Name': 'Bevanda fresca',
      'home.demoProduct2Price': '7.500 XAF',
      'common.learnMore': 'Saperne di più',
      'home.featureOrderMgmtTitle': 'Gestione ordini online',
      'home.featureOrderMgmtDesc': 'Traccia gli ordini, gestisci l\'inventario e invia aggiornamenti automaticamente da una dashboard centralizzata.',
      'home.featureUpdatesTitle': 'Aggiornamenti automatici',
      'home.featureUpdatesDesc': 'Invia automaticamente conferma, stato e consegna su WhatsApp.',
      'home.updatesPreview': 'Anteprima',
      'home.chatCustomer': 'Cliente',
      'home.chatCustomerMsg': 'Ciao, il mio ordine è confermato?',
      'home.chatStore': 'Negozio',
      'home.chatCustomerOk': 'Perfetto, grazie!',
      'home.updateMsg1': 'Sì! Il tuo ordine è in attesa di conferma.',
      'home.updateMsg2': 'Buone notizie: ordine confermato e in preparazione.',
      'home.updateMsg3': 'Il tuo ordine è in consegna. A presto.',
      'home.flowBadgePending': 'In attesa',
      'home.flowBadgeConfirmed': 'Confermato',
      'home.flowBadgeDelivered': 'Consegnato',
      'home.howItWorksTitle': 'Come funziona',
      'home.howItWorksDesc': '4 passi semplici per vendere su WhatsApp con un negozio chiaro.',
      'home.step1Title': 'Crea il tuo negozio',
      'home.step1Desc': 'Registrati e imposta nome + numero WhatsApp.',
      'home.step2Title': 'Aggiungi i prodotti',
      'home.step2Desc': 'Importa o crea il catalogo in pochi minuti.',
      'home.step3Title': 'Condividi il link',
      'home.step3Desc': 'Pubblica il link su WhatsApp e social.',
      'home.step4Title': 'Ricevi gli ordini',
      'home.step4Desc': 'Gestisci, conferma e traccia dal dashboard.',
      'home.flowTitle': 'Esempio ordine',
      'home.flowSubtitle': 'dal cliente alla consegna',
      'home.flowOrderTitle': 'Ordine #1024',
      'home.flowOrderDesc': '2 articoli • Pagamento alla consegna',
      'home.flowConfirmTitle': 'Conferma',
      'home.flowConfirmDesc': 'Validazione rapida lato negozio',
      'home.flowDeliveryTitle': 'Consegna',
      'home.flowDeliveryDesc': 'Tracking e stato in tempo reale',
      'home.flowUpdatesTitle': 'Messaggi',
      'home.flowUpdatesDesc': 'Aggiornamenti inviati automaticamente',
      'home.websiteTitle': 'Crea il tuo sito web in pochi minuti',
      'home.websiteDesc': 'Scegli tra modelli progettati professionalmente.',
      'home.cardCatalogsTitle': 'Bellissimi cataloghi prodotti',
      'home.cardCatalogsDesc': 'Mostra i tuoi prodotti con gallerie mozzafiato.',
      'home.cardDomainTitle': 'Personalizzazione design',
      'home.cardDomainDesc': 'Colori, stile e sezioni per il tuo brand.',
      'home.designPreview': 'Design',
      'home.designLive': 'Anteprima',
      'home.designCta': 'Ordina su WhatsApp',
      'home.cardLinkBioTitle': 'Link-in-bio per Instagram',
      'home.cardLinkBioDesc': 'Perfetto per la vendita sui social media.',
      'home.cardSeoTitle': 'Ottimizzazione per i motori di ricerca (SEO)',
      'home.cardSeoDesc': 'Fatti trovare su Google con strumenti SEO integrati.',
      'home.endCtaTitle': 'Pronto a vendere su WhatsApp?',
      'home.endCtaDesc': 'Crea il tuo negozio e ricevi i primi ordini oggi.',
      'home.endCtaButton': 'Crea il mio negozio',
      'login.title': 'Accedi',
      'login.subtitle': 'Accedi alla tua dashboard commerciante.',
      'create.title': 'Crea un nuovo negozio',
      'create.logo': 'Logo',
      'create.name': 'Nome del negozio *',
      'create.phoneCode': 'Prefisso internazionale *',
      'create.phone': 'Telefono *',
      'create.link': 'Link del negozio *',
      'create.color': 'Colore',
      'create.create': 'Crea',
      'create.placeholderName': 'Nome del negozio',
      'create.placeholderPhone': 'Numero di telefono',
      'create.slugHint': 'Generato automaticamente dal nome, modificabile.',
      'common.home': 'Home',
      'common.search': 'Cerca',
      'register.start': 'Inizia',
      'register.subtitle': 'Crea il tuo account commerciante in pochi passaggi.',
      'register.emailLabel': 'Indirizzo email *',
      'register.continueEmail': 'Continua con Email',
      'register.codeTitle': 'Inserisci il codice di verifica',
      'register.codeMessage': 'Un codice di verifica è stato inviato a {email}.',
      'register.codeLabel': 'Codice di verifica *',
      'register.codeHint': 'Inserisci il codice ricevuto via email',
      'register.verifyContinue': 'Verifica e continua',
      'register.resendCode': 'Invia di nuovo il codice',
      'register.codeInvalid': 'Codice non valido. Riprova.',
      'register.industryQuestion': 'Che tipo di attività gestisci? *',
      'register.selectIndustry': 'Seleziona un settore',
      'register.goalsTitle': 'Qual è il tuo obiettivo?',
      'register.offerTitle': 'Ottieni il primo mese per 1 $',
      'register.offerTodayTitle': 'Oggi: accesso immediato',
      'register.offerTodayDesc': 'Sblocca tutte le funzionalità. Nessun limite.',
      'register.offerRemindTitle': '8 gen: ti ricorderemo',
      'register.offerRemindDesc': 'Promemoria WhatsApp ed email prima della fine della prova.',
      'register.offerStartTitle': '15 gen: inizio piano a pagamento',
      'register.offerStartDesc': 'Annulla in qualsiasi momento nelle impostazioni.',
      'register.subscribeButton': 'Inizia per 1 $',
      'register.skip': 'Salta per ora',
      'common.continue': 'Continua',
      'common.or': 'o',
      'common.sending': 'Invio...',
      'common.verifying': 'Verifica...',
      'register.codeSent': 'Codice inviato',
      'register.resendIn': 'Invia di nuovo in {s}s',
      'preview.store': 'Il tuo negozio',
      'preview.sector': 'Settore',
      'preview.order': 'Ordine #1024',
      'preview.pending': 'In attesa',
      'preview.accepted': 'Accettato',
      'preview.accept': 'Accetta',
      'preview.decline': 'Rifiuta'
    }
  }

  function t(key: string, params?: Record<string, any>) {
    const base = dict[locale.value] || dict.en
    let s = base[key] || dict.en[key] || key
    if (params) {
      for (const k of Object.keys(params)) {
        s = s.replace(new RegExp(`\\{${k}\\}`, 'g'), String(params[k]))
      }
    }
    return s
  }

  function setLocale(l: string) {
    locale.value = l
    try { localStorage.setItem('locale', l) } catch {}
  }

  if (process.client) {
    onMounted(() => {
      try {
        const saved = localStorage.getItem('locale')
        if (saved) locale.value = saved
      } catch {}
    })
  }

  return { locale, t, setLocale }
}
