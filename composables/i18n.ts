export function useI18n() {
  const locale = useState<string>('locale', () => {
    try { return localStorage.getItem('locale') || 'fr' } catch { return 'fr' }
  })

  const dict: Record<string, Record<string, string>> = {
    fr: {
      'home.title': 'Wa-Shop Cameroun',
      'home.description': 'Créez votre boutique WhatsApp en quelques minutes.',
      'home.cta': 'Commencer',
      'home.officialPartner': 'Partenaire officiel',
      'home.heroPrefix': 'Créez un Ecommerce pour',
      'home.heroWhatsApp': 'WhatsApp',
      'home.heroSubtitle': 'Simplifiez les commandes WhatsApp. Augmentez les ventes avec un meilleur service client. Lancez votre boutique en quelques minutes sans coder.',
      'home.ctaStartFree': 'Commencer gratuitement',
      'home.reviews': '500+ avis',
      'home.trustedBy': 'Plébiscité par les entreprises modernes',
      'home.sectionSimplifyTitle': 'Simplifiez les commandes WhatsApp',
      'home.sectionSimplifyDesc': 'Automatisez votre processus de vente avec nos fonctionnalités puissantes.',
      'home.featureOrderFormTitle': 'Formulaire de commande WhatsApp',
      'home.featureOrderFormDesc': 'Les clients passent leurs commandes via WhatsApp, en précisant leurs choix et leur planning.',
      'common.learnMore': 'En savoir plus',
      'home.featureOrderMgmtTitle': 'Gestion des commandes en ligne',
      'home.featureOrderMgmtDesc': 'Suivez les commandes, gérez les stocks et envoyez des mises à jour automatiquement depuis un tableau de bord centralisé.',
      'home.websiteTitle': 'Créez votre site en quelques minutes',
      'home.websiteDesc': 'Choisissez parmi des modèles conçus par des professionnels.',
      'home.cardCatalogsTitle': 'Beaux catalogues produits',
      'home.cardCatalogsDesc': 'Présentez vos produits avec de superbes galeries.',
      'home.cardDomainTitle': 'Domaine personnalisé',
      'home.cardDomainDesc': 'Utilisez votre propre domaine pour une image professionnelle.',
      'home.cardLinkBioTitle': 'Link-in-bio pour Instagram',
      'home.cardLinkBioDesc': 'Parfait pour la vente sur les réseaux sociaux.',
      'home.cardSeoTitle': 'Référencement SEO',
      'home.cardSeoDesc': 'Soyez trouvé sur Google avec des outils SEO intégrés.',
      'login.title': 'Connexion',
      'login.subtitle': 'Accédez à votre espace commerçant.',
      'create.title': 'Créer un nouveau magasin',
      'create.logo': 'Logo',
      'create.name': 'Nom du magasin *',
      'create.phoneCode': 'Indicatif *',
      'create.phone': 'Téléphone *',
      'create.link': 'Lien de magasin *',
      'create.color': 'Couleur',
      'create.create': 'Créer',
      'create.placeholderName': 'Nom de boutique',
      'create.placeholderPhone': 'Numéro de téléphone',
      'create.slugHint': 'Généré automatiquement à partir du nom, modifiable.',
      'common.home': 'Accueil',
      'common.search': 'Recherche',
      'register.start': 'Démarrer',
      'register.subtitle': 'Créez votre compte commerçant en quelques étapes.',
      'register.emailLabel': 'Adresse e‑mail *',
      'register.continueEmail': 'Continuer avec l’e‑mail',
      'register.codeTitle': 'Entrez le code de vérification',
      'register.codeMessage': 'Un code de vérification a été envoyé à {email}.',
      'register.codeLabel': 'Code de vérification *',
      'register.codeHint': 'Saisissez votre code reçu par e‑mail',
      'register.verifyContinue': 'Vérifier et continuer',
      'register.resendCode': 'Renvoyer le code',
      'register.codeInvalid': 'Code invalide. Veuillez réessayer.',
      'register.industryQuestion': 'Quel type d’entreprise dirigez‑vous ? *',
      'register.selectIndustry': 'Sélectionnez un secteur d’activité',
      'register.goalsTitle': 'Quel est votre objectif ?',
      'register.offerTitle': 'Obtenez votre premier mois pour 1 $',
      'register.offerTodayTitle': 'Aujourd’hui : accès instantané',
      'register.offerTodayDesc': 'Débloquez toutes les fonctionnalités. Aucun plafond.',
      'register.offerRemindTitle': 'Jan 8 : rappel',
      'register.offerRemindDesc': 'Rappels par WhatsApp et e‑mail avant la fin de l’essai.',
      'register.offerStartTitle': 'Jan 15 : forfait payant',
      'register.offerStartDesc': 'Annulez à tout moment dans les réglages.',
      'register.subscribeButton': 'Commencer pour 1 $',
      'register.skip': 'Sauter pour l’instant',
      'common.continue': 'Continuer',
      'common.or': 'ou',
      'common.sending': 'Envoi...',
      'common.verifying': 'Vérification...',
      'register.codeSent': 'Code envoyé',
      'register.resendIn': 'Renvoyer dans {s}s',
      'preview.store': 'Votre Boutique',
      'preview.sector': 'Secteur',
      'preview.order': 'Order #1024',
      'preview.pending': 'Pending',
      'preview.accepted': 'Accepted',
      'preview.accept': 'Accept',
      'preview.decline': 'Decline'
    },
    en: {
      'home.title': 'Wa-Shop Cameroon',
      'home.description': 'Create your WhatsApp store in minutes.',
      'home.cta': 'Get Started',
      'home.officialPartner': 'Official Partner',
      'home.heroPrefix': 'Create Ecommerce for',
      'home.heroWhatsApp': 'WhatsApp',
      'home.heroSubtitle': 'Simplify WhatsApp ordering. Boost sales with better customer service. Launch your store in minutes without any coding.',
      'home.ctaStartFree': 'Start for Free',
      'home.reviews': '500+ Reviews',
      'home.trustedBy': 'Trusted by modern businesses',
      'home.sectionSimplifyTitle': 'Simplify WhatsApp Ordering',
      'home.sectionSimplifyDesc': 'Automate your sales process with our powerful features.',
      'home.featureOrderFormTitle': 'WhatsApp Order Form',
      'home.featureOrderFormDesc': 'Customers independently place orders through WhatsApp, specifying their choices and scheduling.',
      'common.learnMore': 'Learn more',
      'home.featureOrderMgmtTitle': 'Online Order Management',
      'home.featureOrderMgmtDesc': 'Track orders, manage inventory, and send updates automatically from a centralized dashboard.',
      'home.websiteTitle': 'Create Your Website in Minutes',
      'home.websiteDesc': 'Choose from professionally designed templates.',
      'home.cardCatalogsTitle': 'Beautiful product catalogs',
      'home.cardCatalogsDesc': 'Showcase your products with stunning galleries.',
      'home.cardDomainTitle': 'Custom Domain',
      'home.cardDomainDesc': 'Use your own domain name for a professional look.',
      'home.cardLinkBioTitle': 'Link-in-bio for Instagram',
      'home.cardLinkBioDesc': 'Perfect for social media selling.',
      'home.cardSeoTitle': 'Search Engine Optimization (SEO)',
      'home.cardSeoDesc': 'Get found on Google with built-in SEO tools.',
      'login.title': 'Login',
      'login.subtitle': 'Access your merchant dashboard.',
      'create.title': 'Create a new store',
      'create.logo': 'Logo',
      'create.name': 'Store name *',
      'create.phoneCode': 'Country code *',
      'create.phone': 'Phone *',
      'create.link': 'Store link *',
      'create.color': 'Color',
      'create.create': 'Create',
      'create.placeholderName': 'Store name',
      'create.placeholderPhone': 'Phone number',
      'create.slugHint': 'Automatically generated from name, editable.',
      'common.home': 'Home',
      'common.search': 'Search',
      'register.start': 'Get Started',
      'register.subtitle': 'Create your merchant account in a few steps.',
      'register.emailLabel': 'Email address *',
      'register.continueEmail': 'Continue with Email',
      'register.codeTitle': 'Enter verification code',
      'register.codeMessage': 'A verification code has been sent to {email}.',
      'register.codeLabel': 'Verification code *',
      'register.codeHint': 'Enter the code you received by email',
      'register.verifyContinue': 'Verify and continue',
      'register.resendCode': 'Resend code',
      'register.codeInvalid': 'Invalid code. Please try again.',
      'register.industryQuestion': 'What type of business do you run? *',
      'register.selectIndustry': 'Select an industry',
      'register.goalsTitle': 'What is your objective?',
      'register.offerTitle': 'Get your first month for $1',
      'register.offerTodayTitle': 'Today: instant access',
      'register.offerTodayDesc': 'Unlock all features. No cap.',
      'register.offerRemindTitle': 'Jan 8: we will remind you',
      'register.offerRemindDesc': 'WhatsApp and email reminders before the trial ends.',
      'register.offerStartTitle': 'Jan 15: paid plan starts',
      'register.offerStartDesc': 'Cancel anytime in settings.',
      'register.subscribeButton': 'Start for $1',
      'register.skip': 'Skip for now',
      'common.continue': 'Continue',
      'common.or': 'or',
      'common.sending': 'Sending...',
      'common.verifying': 'Verifying...',
      'register.codeSent': 'Code sent',
      'register.resendIn': 'Resend in {s}s',
      'preview.store': 'Your Store',
      'preview.sector': 'Sector',
      'preview.order': 'Order #1024',
      'preview.pending': 'Pending',
      'preview.accepted': 'Accepted',
      'preview.accept': 'Accept',
      'preview.decline': 'Decline'
    }
  }

  function t(key: string, params?: Record<string, any>) {
    const base = dict[locale.value] || dict.fr
    let s = base[key] || dict.en[key] || key
    if (params) {
      for (const k of Object.keys(params)) {
        s = s.replace(new RegExp(`\\{${k}\\}`, 'g'), String(params[k]))
      }
    }
    return s
  }

  function setLocale(l: string) {
    locale.value = l
    try { localStorage.setItem('locale', l) } catch {}
  }

  return { locale, t, setLocale }
}
